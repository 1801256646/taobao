"use strict";$("form").submit(function(e){(e=e||window.event).preventDefault()}),$(".btn-default").click(function(){window.location.href="../pages/login.html"}),$("#register").click(function(e){if(!/^\w{6,16}$/.test($("#username").val()))return layer.msg("请输入6-16位的用户名"),"";if(!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test($("#email").val()))return layer.msg("请输入正确的邮箱"),"";if(!/^\w{6,16}$/.test($("#password1").val()))return layer.msg("请输入6-16位密码"),"";if($("#password1").val()!=$("#password2").val())return layer.msg("两次密码不一致"),"";if(!$("#chk").prop("checked"))return layer.msg("请先同意协议"),"";var t=layer.load(0,{shade:[1,"#ccc"],shadeClose:!0});$.ajax({url:"../php/register.php",type:"post",data:{username:$("#username").val(),email:$("#email").val(),password:$("#password1").val()},dataType:"json",success:function(e){if(0==e.status)layer.msg(e.error),setTimeout(function(){layer.close(t)},1e3);else{var a=layer.msg(e.error);setTimeout(function(){layer.close(a)},500),setTimeout(function(){window.location.href="../pages/login.html",layer.close(t)},2e3)}}})}),getCookie("username")?($("#login").text("欢迎尊贵的"+getCookie("username")),$("#login").click(function(e){return!1})):($("#login").text("登录"),$("#login").click(function(){window.location.href="../pages/login.html"}));